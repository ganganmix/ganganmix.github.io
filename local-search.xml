<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>QQbotç¬¬ä¸€å¼¹:nonebotçš„åŸç†â€”â€”â€”â€”go-cqhttpçš„æ•°æ®åŒ…</title>
    <link href="/2023/01/11/QQbot%E7%AC%AC%E4%B8%80%E5%BC%B9-nonebot%E7%9A%84%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94gocqhttp%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8C%85/"/>
    <url>/2023/01/11/QQbot%E7%AC%AC%E4%B8%80%E5%BC%B9-nonebot%E7%9A%84%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94gocqhttp%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<h1 id="å¯¼è®º"><a href="#å¯¼è®º" class="headerlink" title="å¯¼è®º"></a>å¯¼è®º</h1><ol><li>go-cqhttpçš„é“¾æ¥<ul><li>é¡¹ç›®çš„æ¦‚è¿°</li></ul></li><li>go-cqhttpä¸nonebotçš„é€šä¿¡è¿æ¥<ul><li>è¿æ¥æ–¹å¼</li><li>socketæœåŠ¡å™¨çš„æ¥æ”¶å®ä¾‹</li><li>websocketæœåŠ¡å™¨çš„æ¥æ”¶å®ä¾‹</li></ul></li></ol><h3 id="go-cqhttpçš„é“¾æ¥"><a href="#go-cqhttpçš„é“¾æ¥" class="headerlink" title="go-cqhttpçš„é“¾æ¥"></a>go-cqhttpçš„é“¾æ¥</h3><ul><li><h4 id="é¡¹ç›®çš„æ¦‚è¿°"><a href="#é¡¹ç›®çš„æ¦‚è¿°" class="headerlink" title="é¡¹ç›®çš„æ¦‚è¿°"></a>é¡¹ç›®çš„æ¦‚è¿°</h4></li></ul><blockquote><p><b><a href="https://docs.go-cqhttp.org/">go-cqhttp</a></b>,åŸºäº Mirai ä»¥åŠ MiraiGo çš„ OneBot Golang åŸç”Ÿå®ç°çš„é¡¹ç›®ï¼Œä¸»åŠ›æ˜¯goè¯­è¨€ç¼–å†™(<font color=red><s>ä¿ºä¹Ÿä¸ä¼šæ</s></font>ğŸ¤—)</p><p>(åæ­£å°±æ˜¯ddlå¾ˆnbå“’â†<font size="2" color="cyan">æ˜æ˜ä»€ä¹ˆéƒ½ä¸çŸ¥é“çš„å°ç™½</font>ğŸ‘ˆğŸ˜‚)</p><p>å®ƒçš„å…¼å®¹æ€§:</p><div id="interface"><font size="4" color="black"><b>æ¥å£</b></font></div><ul><li>http api</li><li>åå‘http post</li><li>æ­£å‘websocket</li><li>åå‘websocket</li></ul><p><font size="4" color="black"><b>æ€§èƒ½</b></font></p><ul><li>åœ¨å…³é—­æ•°æ®åº“çš„æƒ…å†µä¸‹, åŠ è½½ 25 ä¸ªå¥½å‹ 128 ä¸ªç¾¤è¿è¡Œ 24 å°æ—¶åå†…å­˜ä½¿ç”¨ä¸º 10MB å·¦å³. å¼€å¯æ•°æ®åº“åå†…å­˜ä½¿ç”¨å°†æ ¹æ®æ¶ˆæ¯é‡å¢åŠ  10-20MB , å¦‚æœç³»ç»Ÿå†…å­˜å°äº 128M å»ºè®®å…³é—­æ•°æ®åº“ä½¿ç”¨ã€‚</li></ul><p><a href="https://docs.go-cqhttp.org/">go-cqhttp å¸®åŠ©ä¸­å¿ƒ</a></p><p><img src="https://user-images.githubusercontent.com/25968335/120111974-8abef880-c139-11eb-99cd-fa928348b198.png" alt="go-cqhttp"></p></blockquote><hr><h2 id="go-cqhttpä¸nonebotçš„é€šä¿¡è¿æ¥"><a href="#go-cqhttpä¸nonebotçš„é€šä¿¡è¿æ¥" class="headerlink" title="go-cqhttpä¸nonebotçš„é€šä¿¡è¿æ¥"></a>go-cqhttpä¸nonebotçš„é€šä¿¡è¿æ¥</h2><ul><li><h4 id="è¿æ¥æ–¹å¼"><a href="#è¿æ¥æ–¹å¼" class="headerlink" title="è¿æ¥æ–¹å¼"></a>è¿æ¥æ–¹å¼</h4></li></ul><blockquote><p>go-cqhttpä¸nonebotçš„é“¾æ¥å¯ä»¥é€‰æ‹©gcæä¾›çš„<a href="#interface">æ¥å£</a>çš„å‡ ç§æ–¹å¼</p><img src="\img\interface.png" alt="interface" style="zoom:60%;" /><p>æˆ‘æƒ³è¦åå‘websocketè¿›è¡Œè·å–ï¼Œå°±æ˜¯æˆ‘ä½œwebsoocketçš„æœåŠ¡å™¨ï¼Œè®©go-cqhttpä½œå®¢æˆ·ç«¯ç»™æˆ‘ä»¬å‘é€æ¶ˆæ¯<font color="red"><s>(å…¶å®æ˜¯å› ä¸ºä¸æ˜¯å¾ˆäº†è§£è¿™äº›æ¥å£)</s></font>ï¼Œæˆ‘å¥½èœğŸ˜­ğŸ˜­ğŸ˜­</p><img src="\img\choose.png" alt="choose" style="zoom:60%;" /><p>é€‰æ‹©3ï¼Œåå‘websocketï¼Œè¿™æ ·ä¹Ÿå¯ä»¥çœ‹çœ‹go-cqhttpçš„åˆ°åº•å‘çš„ä»€ä¹ˆç©æ„ğŸ˜‹ğŸ˜‹ğŸ˜‹</p></blockquote><ul><li><h4 id="socketæœåŠ¡å™¨çš„ç®€å•å®ä¾‹"><a href="#socketæœåŠ¡å™¨çš„ç®€å•å®ä¾‹" class="headerlink" title="socketæœåŠ¡å™¨çš„ç®€å•å®ä¾‹"></a>socketæœåŠ¡å™¨çš„ç®€å•å®ä¾‹</h4></li></ul><blockquote><p>æˆ‘ä»¬å…ˆæ‰“å¼€go-cqhttpå¹¶ç™»å½•</p><img src="\img\gocq_login.png" alt="gocq_login" style="zoom:50%;" /></blockquote><blockquote><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„socketæœåŠ¡å™¨ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦ç”¨socketè€Œä¸æ˜¯websocketæï¼Œå› ä¸º<s>æˆ‘æé”™äº†&gt; ğŸ˜‹</s>ï¼Œå› ä¸ºæˆ‘ä¹Ÿæƒ³çŸ¥é“å¦‚æœåè®®ä¸å¯¹ï¼Œgo-cqhttpä¼šå‘ä¸ªä»€ä¹ˆä¸œè¥¿è¿‡æ¥ğŸ˜ŠğŸ˜ŠğŸ˜Š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;<span class="hljs-keyword">import</span> socket<br>&gt;server = socket.socket(socket.AF_INET, socket.sock_STREAM)<br>&gt;server.bind((<span class="hljs-string">&quot;&quot;</span>, port)) <span class="hljs-comment"># ç«¯å£å·</span><br>&gt;server.listen(<span class="hljs-number">126</span>) <span class="hljs-comment"># è®¾ç½®ç›‘å¬ï¼Œå‚æ•°ä¸ºæœ€å¤§é˜Ÿåˆ—æ•°</span><br>&gt;new_socket, path = server.sccept()<br>&gt;<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>&gt;data = new_socket.recv()<br>&gt;<span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) != <span class="hljs-number">0</span>:<br>  <span class="hljs-built_in">print</span>(data.decode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>&gt;breack<br>&gt;new_socket.close()<br>&gt;server.close()<br></code></pre></td></tr></table></figure><p>â†‘(<font color="blue"><s>ä»€ä¹ˆåƒåœ¾ä»£ç </s></font>ğŸ˜­ğŸ˜­ğŸ˜­)</p><p>è¿è¡Œä¹‹å,å‡ºç°ä¸€æ¬¡å¿ƒè·³åŒ…åå°±closeäº†ï¼Œè¯´æ˜go-cqhttpå®¢æˆ·ç«¯å‘ç°åè®®ä¸å¯¹ï¼Œä¸»åŠ¨æ–­å¼€é“¾æ¥äº†:</p><img src="\img\gocq_warning.png" alt="gocq_warning" style="zoom:60%;" /><p>æ˜¾ç¤º<font color="red"><b>unexpected EOF</b></font>,è‡³äºæ˜¯ä»€ä¹ˆæ„æ€ã€‚ã€‚ã€‚ï¼ˆè‡ªè¡ŒbaiduğŸ˜ŠğŸ‘ˆğŸ˜‚ï¼‰</p><p>æˆ‘ä»¬çœ‹çœ‹pythonçš„socketæœåŠ¡ç«¯ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†æ›´è¯¦ç»†çš„å†…å®¹:</p><img src="\img\gocq_py.png" alt="gocq_py" style="zoom:60%;" /><p>å‘ç°<font color="red"><b>Connection: Upgrade</b></font>å’Œ<font color="red"><b>Upgrade: websocket</b></font>ï¼Œæ„æ€å°±æ˜¯è¯´è¦æ›´æ¢æˆ<b>websocket</b></p><p><b>å¥½ï¼é‚£å°±æ¢å§</b>ğŸ¤—ğŸ¤—ğŸ¤—</p></blockquote><hr><ul><li><h4 id="websocketæœåŠ¡å™¨çš„æ¥æ”¶å®ä¾‹"><a href="#websocketæœåŠ¡å™¨çš„æ¥æ”¶å®ä¾‹" class="headerlink" title="websocketæœåŠ¡å™¨çš„æ¥æ”¶å®ä¾‹"></a>websocketæœåŠ¡å™¨çš„æ¥æ”¶å®ä¾‹</h4></li></ul><blockquote><p>æˆ‘ä½¿ç”¨pythonå†™äº†ä¸€ä¸ªç®€å•çš„å¼‚æ­¥websocketæœåŠ¡å™¨ï¼Œç”¨jsonæ¥è§£æjsonæ•°æ®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> websocket<br><span class="hljs-keyword">import</span> asyncio<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">data</span>(<span class="hljs-params">websocket, path</span>): <span class="hljs-comment">#åˆ›å»ºä¸€ä¸ªå¼‚æ­¥å›è°ƒå‡½æ•°dataï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œwebsocketå¥—æ¥å­—ï¼Œpathæ•°æ®åè®®</span><br> <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> websocket: <span class="hljs-comment"># è¿­ä»£å‡ºwebsocketé‡Œé¢çš„æ•°æ®</span><br>     j = json.loads(message)<br>     <span class="hljs-built_in">print</span>(j)<br>asyncio.get_event_loop().run_until_compete(websocket.server(data, <span class="hljs-string">&quot;localhost&quot;</span>, post)) <span class="hljs-comment"># ä¼ å…¥postï¼Œhostï¼Œå’Œ</span><br>asyncio.get_event_loop().run_forever()<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šè¿‡å¼‚æ­¥çš„æ–¹å¼æ¥æ”¶ä»£ç ï¼Œå¾—åˆ°çš„æ•°æ®å¯ä»¥åˆ†ä¸ºä¸‰ç§</p><blockquote><p>è¿æ¥æˆåŠŸçš„æç¤ºæ¶ˆæ¯ï¼š</p><img src="\img\success.png" alt="success" style="zoom:60%;" /><p>ä¸å®¢æˆ·ç«¯çš„å¿ƒè·³<s>â¤ï¸</s>åŒ…:</p><img src="\img\mete_event.png" alt="mete_event" style="zoom:60%;" /><p>å¯¹åº”çš„æ¶ˆæ¯æ•°æ®ï¼š</p><img src="\img\message_data.png" alt="message_data" style="zoom:60%;" /></blockquote><p>è¿™å…¶ä¸­çš„å°±åŒ…æ‹¬ç›¸åº”çš„<b>æ¶ˆæ¯æ•°æ®</b>ï¼Œ<b>time</b>ç­‰ç­‰ğŸ‘ˆğŸ˜Šï¼Œä¹Ÿå°±æ˜¯æœ‰äº†nbçš„ç¬¬ä¸€ç‰ˆ(bushi</p></blockquote><p>æœ€åï¼ŒæŒ‚ä¸€å¼ è€å©†  <a href="https://github.com/Ikaros-521"><strong>Loveä¸¶ä¼Šå¡æ´›æ–¯</strong></a>(javaå¤§ä½¬ï¼Œ<a href="https://space.bilibili.com/3709626">bç«™up</a>ï¼Œ<s><font color="red"><b>å¤§å‚å‘˜å·¥(ä¸å¹²äº†)</b></font></s>)ï¼š</p><p><img src="https://avatars.githubusercontent.com/u/40910637?v=4" alt="**Loveä¸¶ä¼Šå¡æ´›æ–¯**"></p>]]></content>
    
    
    
    <tags>
      
      <tag>nonebot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬ä¸€ç¯‡:hello world!</title>
    <link href="/2023/01/11/%E7%AC%AC%E4%B8%80%E7%AF%87-hello-world/"/>
    <url>/2023/01/11/%E7%AC%AC%E4%B8%80%E7%AF%87-hello-world/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ç¯‡å†™çš„ç›®çš„å…¶å®å°±æ˜¯è¯´æ˜ï¼Œä¿ºè¦å¼€å§‹å†™äº†ï¼Œæ‰€ä»¥æ˜¯hallo-world"><a href="#ç¬¬ä¸€ç¯‡å†™çš„ç›®çš„å…¶å®å°±æ˜¯è¯´æ˜ï¼Œä¿ºè¦å¼€å§‹å†™äº†ï¼Œæ‰€ä»¥æ˜¯hallo-world" class="headerlink" title="ç¬¬ä¸€ç¯‡å†™çš„ç›®çš„å…¶å®å°±æ˜¯è¯´æ˜ï¼Œä¿ºè¦å¼€å§‹å†™äº†ï¼Œæ‰€ä»¥æ˜¯hallo world!"></a>ç¬¬ä¸€ç¯‡å†™çš„ç›®çš„å…¶å®å°±æ˜¯è¯´æ˜ï¼Œä¿ºè¦å¼€å§‹å†™äº†ï¼Œæ‰€ä»¥æ˜¯<font color="red">hallo world</font>!</h1><blockquote><p>æˆ‘ä»¥åä¼šç”¨testè¿™ä¸ªtagæ¥æ”¶é›†mdç¼–å†™æŠ€å·§æˆ–è€…ä¸€äº›ä»€ä¹ˆä¸œè¥¿,ä¹Ÿå¯ä»¥ä¸ç”¨çœ‹å§ğŸ¤—ğŸ¤—ğŸ¤—</p></blockquote><h2 id="ç•™ä¸‹ç‚¹ä¸œè¥¿å§"><a href="#ç•™ä¸‹ç‚¹ä¸œè¥¿å§" class="headerlink" title="ç•™ä¸‹ç‚¹ä¸œè¥¿å§"></a>ç•™ä¸‹ç‚¹ä¸œè¥¿å§</h2><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world!&quot;</span>)<br></code></pre></td></tr></table></figure><p>javascript</p></blockquote><blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;hello world!&quot;</span>)<br></code></pre></td></tr></table></figure><p>python</p></blockquote><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">helloworld</span>&#123;  <span class="hljs-comment">//publicç±»åè¦ä¸javaæ–‡ä»¶åä¸€è‡´,ä¹Ÿå°±æ˜¯æ–‡ä»¶çš„å‡ºå£</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(string[] args)</span>&#123;<br>       System.out.print(<span class="hljs-string">&quot;hello world!&quot;</span>); <span class="hljs-comment">//æœ‰System.outå½“ç„¶æœ‰System.inå“’ğŸ˜Š</span><br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>java</p></blockquote><blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>   fmt.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;hello world&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>go</p></blockquote><blockquote><blockquote><p>æœ€å,è´´ä¸€å¼ æˆ‘çš„å¶åƒ<a href="https://github.com/djkcyl">A60</a>ğŸ¥µğŸ¥µğŸ¥µ,æ˜¯æˆ‘æš‚æ—¶çš„ä¿¡ä»°æğŸ˜‹ğŸ˜‹ğŸ˜‹</p></blockquote><p><img src="https://avatars.githubusercontent.com/u/59153990?v=4" alt="A60"></p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>test</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
